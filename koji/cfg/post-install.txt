After executing install.sh you should run through the following.

service postgresql restart
service kojid restart
service kojira restart

koji grant-permission repo kojira


# Add hosts and channels

koji add-host kojibuilder1.localdomain i386 x86_64
koji add-host-to-channel kojibuilder1.localdomain createrepo
koji add-host-to-channel kojibuilder1.localdomain livecd
koji add-host-to-channel kojibuilder1.localdomain appliance
koji add-host-to-channel kojibuilder1.localdomain vm
koji add-host-to-channel kojibuilder1.localdomain maven

# Add tags and tag inheritance

koji add-tag fedora-18-base
koji add-tag fedora-18-addons
koji add-tag fedora-18-addons-testing --parent=fedora-18-addons
koji add-tag fedora-18-addons-build --parent=fedora-18-addons --arches="x86_64"
koji add-tag-inheritance --priority=1 fedora-18-addons-build fedora-18-base
koji add-tag maven-build --maven-support --parent=fedora-18-addons --arches="x86_64"
koji add-tag --include-all --maven-support maven-import
koji add-tag-inheritance fedora-18-addons-build maven-import --priority 10

# Add target

koji add-target fedora-18-addons fedora-18-addons-build fedora-18-addons-testing

# Add external repo
koji add-external-repo -t fedora-18-base fedora-mirror http://localhost.localdomain/repos/fedora-mirror

# Add groups

koji add-group fedora-18-addons-build build
koji add-group-pkg fedora-18-addons-build build bash bzip2 cpio diffutils fedora-release findutils gawk gcc gcc-c++ info make redhat-rpm-config rpm-build sed shadow-utils unzip util-linux-ng which xz

koji add-group fedora-18-addons-build srpm-build
koji add-group-pkg fedora-18-addons-build srpm-build bash curl cvs fedora-release fedpkg gnupg2 make redhat-rpm-config rpm-build shadow-utils

koji add-group fedora-18-addons-build livecd-build
koji add-group-pkg fedora-18-addons-build livecd-build bash bzip2 coreutils cpio diffutils fedora-logos fedora-release findutils gawk gcc gcc-c++ grep gzip info livecd-tools make patch policycoreutils python-dbus redhat-rpm-config rpm-build sed selinux-policy-targeted shadow-utils squashfs-tools tar unzip util-linux which yum

koji add-group fedora-18-addons-build appliance-build
koji add-group-pkg fedora-18-addons-build appliance-build appliance-tools bash coreutils grub parted perl policycoreutils selinux-policy shadow-utils

koji add-group fedora-18-addons-build maven-build
koji add-group-pkg fedora-18-addons-build maven-build bash coreutils java-1.7.0-openjdk-devel maven3 subversion liberation-sans-fonts liberation-serif-fonts liberation-mono-fonts git

# Install repo packages

yum install yum-utils

vi /etc/yum.repos.d/fedora-mirror.repo

[fedora-mirror]
name=Fedora $releasever - $basearch
failovermethod=priority
mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=fedora-$releasever&arch=$basearch
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$basearch

# Download rpms and create repo metadata

mkdir -p /srv/www/html/repos/
reposync -r fedora-mirror -p /var/www/html/repos/
createrepo /srv/www/html/repos/fedora-mirror

# Maven installation

wget http://download.devel.redhat.com/brewroot/packages/org.apache.maven-maven/3.0.3/4/src/maven3-3.0.3-4.src.rpm
wget http://download.devel.redhat.com/brewroot/packages/org.apache.maven-maven/3.0.3/4/noarch/maven3-3.0.3-4.noarch.rpm
koji import --create-build maven3-3.0.3-4.src.rpm maven3-3.0.3-4.noarch.rpm
koji add-pkg --owner=kojiadmin fedora-18-addons-build maven3
koji tag-pkg fedora-18-addons-build maven3-3.0.3-4

